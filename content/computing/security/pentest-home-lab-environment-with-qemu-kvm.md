---
date: 2022-08-20
---

PenTest Home Lab Environement with QEMU/KVM
===========================================

External
--------

We use this to update our system. Especially our Kali Linux box which
needs update from time to time.

NAT mode with IPv4 and DHCPv4 activated. For simplicity, IPv6 is
deactivated and DNS uses network name.

:::{.highlight-block}
This mode is similar to QEMU/KVM's default (aptly
named "default") virtual network. However as a rule I prefer to create
and configure rules myself.
:::

``` xml
<network>
  <name>pentest-external</name>
  <forward mode="nat"/>
  <domain name="pentest-external"/>
  <ip address="192.168.100.1" netmask="255.255.255.0">
    <dhcp>
      <range start="192.168.100.128" end="192.168.100.254"/>
    </dhcp>
  </ip>
</network>
```

Private (Isolated)
------------------

Virtualized network that is completely separate from the production
side, i.e., that cannot reach into the production side unless you want
it to.

Isolated mode with IPv4 enabled but DHCPv4 and IPv6 deactivated. DNS is
default (“Use network name”).

``` xml
<network>
  <name>pentest-private</name>
  <domain name="pentest-private"/>
  <ip address="192.168.100.1" netmask="255.255.255.0"/>
</network>
```

[Source](https://wiki.libvirt.org/page/VirtualNetworking#Virtual_Networking)
