<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>Structured Query Language (SQL) - エキソブレイン</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Merriweather|Libre+Franklin|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><link href="static/favicon.png" rel="icon" /><link href="static/apple-touch-icon.png" rel="apple-touch-icon" /><meta content="CyberFlamingo" name="author" /><meta content="SQL, meaning Structured Query Language, is a programming language used to communicate with a relational database." name="description" /><link href="https://zettel.cyberflamingo.net/sql" rel="canonical" /><meta content="Structured Query Language (SQL)" property="og:title" /><meta content="エキソブレイン" property="og:site_name" /><meta content="article" property="og:type" /><meta content="sql" property="neuron:zettel-id" /><meta content="sql" property="neuron:zettel-slug" /><script type="application/ld+json">[{"@context":"https://schema.org","itemListElement":[{"name":"外付け脳 (exobrain)","item":"https://zettel.cyberflamingo.net","@type":"ListItem","position":1},{"name":"Computing","item":"https://zettel.cyberflamingo.net/cecb6a47","@type":"ListItem","position":2},{"name":"Software","item":"https://zettel.cyberflamingo.net/b6a0ce9f","@type":"ListItem","position":3}],"@type":"BreadcrumbList"}]</script><style type="text/css">body{background-color:#eeeeee !important;font-family:"Libre Franklin", serif !important}body .ui.container{font-family:"Libre Franklin", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Merriweather", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .zettel-content h1#title-h1{background-color:rgba(100,53,201,0.1)}body nav.bottomPane{background-color:rgba(100,53,201,2.0e-2)}body div#footnotes{border-top-color:#6435c9}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content div#footnotes ol > li > p:only-of-type{display:inline;margin-right:0.5em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f5f2f0}body div.zettel-view .zettel-content pre{overflow:auto}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}body span.zettel-link-container span.zettel-link a{color:#6435c9;font-weight:bold;text-decoration:none}body span.zettel-link-container span.zettel-link a:hover{background-color:rgba(100,53,201,0.1)}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}</style><script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script><!--replace-end-7--><!--replace-end-4--><!--replace-end-1--></head><body><div class="ui fluid container universe"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><nav class="flipped tree deemphasized" id="zettel-uptree" style="transform-origin: 50%"><ul class="root"><li><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2020-08-02"><a href="b6a0ce9f">Software</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link" title="2020-08-02"><a href="cecb6a47">Computing</a></span></span></div><ul><li><div class="forest-link"><span class="zettel-link-container"><span class="zettel-link"><a href=".">外付け脳 (exobrain)</a></span></span></div></li></ul></li></ul></li></ul></li></ul></nav><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="title-h1">Structured Query Language (SQL)</h1><p>SQL, meaning <strong>S</strong>tructured <strong>Q</strong>uery <strong>L</strong>anguage, is a programming language used to communicate with a relational database.</p><p>It uses simple English sentences that allow to <code>SELECT</code> (find), <code>INSERT</code> (add), <code>UPDATE</code> (change) or <code>DELETE</code> (remove) data.</p><p>SQL is a <em>declarative</em> language: in a SQL statement you describe <strong>what</strong> needs to be done, but not <strong>how</strong> to do it; the later, as well as the execution, is handled by the <span class="zettel-link-container folge"><span class="zettel-link" title="2022-03-25T09:30"><a href="relational-database-management-system">Relational DataBase Management System</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span>.</p><h2 id="sql-sub-languages">SQL Sub-Languages</h2><p>One can think of SQL as three separate sub-languages which their specificities:</p><ul><li><strong>DDL: Data Definition Language</strong>: define the structure of a database and the tables and columns within it</li><li><strong>DML: Data Manipulation Language</strong>: retrieve or modify data stored in a database (ex: <code>SELECT</code> queries)</li><li><strong>DCL: Data Control Language</strong>: determine what various users are allowed to do when interacting with a database, in other words, the “security” of a database</li></ul><p><a href="https://launchschool.com/books/sql/read/interacting_with_postgresql">Source</a></p><h2 id="data-vs-schema">Data vs Schema</h2><p>A RDBMS such as <span class="zettel-link-container cf"><span class="zettel-link" title="2022-03-25T11:35"><a href="postgresql">PostgreSQL</a></span></span> knows how to interpret the syntax of an SQL statement thanks to the role that data and schema plays in a database.</p><p><strong>Schema</strong> relates to the <em>structure</em> of a database, such as the name of a table and its columns, data types etc.</p><p><strong>Data</strong> relates to the <em>contents</em> of a database, i.e., the actual values associated with rows and columns in a database table.</p><p>The combination of the two is what creates the structured data that we can interact with.</p><p><a href="https://launchschool.com/books/sql/read/basics_tutorial">Source</a></p><h2 id="convention">Convention</h2><p>SQL is case-insensitive, meaning it doesn’t care if its statement is written in lowercase or uppercase. This is not true for data, though.</p><p>The convention is to use uppercase for commands and lowercase for names, for clarity.</p><h3 id="database-naming">Database Naming</h3><p>Database names shall be self-descriptive, no abbreviation nor acronym, and names shall be written in snake_case.</p><h2 id="sql-tables">SQL Tables</h2><p>Tables, sometimes called <em>relations</em> and the relationships between those are what provide structure to our data. Data are saved in the columns of our table.</p><p>Tables can be used to represent real world abstractions of business logic, such as customer or an order.</p><p>A basic table is create with the following statement:</p><pre><code class="sql language-sql">CREATE TABLE table_name (
  column_1_name column_1_data_type [constraints, ...],
  column_2_name column_2_data_type [constraints, ...],
  -- ...
);</code></pre><p>Each line (finished by a coma <code>,</code>) represents one column of our table. The first part is the name of the column. Except for the convention described above, there is nothing particular to be aware of. The second part is the data type of the column (see below). The third part is one or more constraints (optional).</p><h3 id="data-types">Data Types</h3><p>A data type describes the values that is allowed for that column of the table. It’s both for organization and for protection of the database (to refrain from entering invalid type). Commons data types are described below:</p><table class="ui table"><thead><tr><th>Data Type</th><th>Description</th></tr></thead><tbody><tr><td><code>serial</code></td><td>(Deprecated) Create identifier columns <code>id</code> (non-null auto-incrementing integer) for the database</td></tr><tr><td><code>IDENTITY</code></td><td>New feature replacing <code>serial</code><span data-nosnippet=""><sup class="footnote-ref"><a href="#fn1" id="fnref1">1</a></sup></span></td></tr><tr><td><code>char(N)</code></td><td>Column can only contain a string of <code>N</code> characters in length (remaining filled with space characters)</td></tr><tr><td><code>varchar(N)</code></td><td>Same as <code>char(N)</code> without the constrain of remaining string length</td></tr><tr><td><code>boolean</code></td><td>Boolean data type (<code>true</code> / <code>false</code>, or <code>t</code> / <code>f</code> in PostgreSQL</td></tr><tr><td><code>integer</code> or <code>INT</code></td><td>Integer data type</td></tr><tr><td><code>decimal(precision, scale)</code></td><td>Decimal number with a total digits of <code>precision</code> and total digits in the fractional part of <code>scale</code></td></tr><tr><td><code>timestamp</code></td><td>Date and tie in <code>YYYY-MM-DD HH:MM:SS</code> format</td></tr><tr><td><code>date</code></td><td>Date without the time</td></tr></tbody></table><h3 id="constraints">Constraints</h3><p>Constraints are rules to put on columns in order to define what data values are allowed. While optional, most of the time it is recommended to add them as it helps maintaining the integrity and quality of the data that the column is storing.</p><p>Often used constraints include:</p><table class="ui table"><thead><tr><th>Constraints</th><th>Description</th></tr></thead><tbody><tr><td><code>UNIQUE</code></td><td>Prevents duplicate value in that column</td></tr><tr><td><code>NOT NULL</code></td><td>Cannot be left empty</td></tr><tr><td><code>DEFAULT foo</code></td><td>If no value is set at creation time, default value of <code>foo</code> is set in that field</td></tr></tbody></table><h3 id="alter-a-table">Alter a Table</h3><p>One can modify a table using the <code>ALTER TABLE</code> statement. The syntax is as follow:</p><pre><code class="sql language-sql">ALTER TABLE
  table_name
  modify_clause
  arguments;</code></pre><p>To rename a <strong>table</strong>, one can use the following:</p><pre><code class="sql language-sql">ALTER TABLE
  foo RENAME TO bar;</code></pre><p>To rename a <strong>column</strong>, one can use the following:</p><pre><code class="sql language-sql">ALTER TABLE
  bar RENAME COLUMN foobar TO barfoo;</code></pre><h4 id="alter-a-columns-datatype">Alter a Column’s Datatype</h4><p>To alter a column’s datatype, one can use <code>ALTER COLUMN</code> in conjunction with <code>ALTER TABLE</code>:</p><pre><code class="sql language-sql">ALTER TABLE
  bar
ALTER COLUMN
  barfoo TYPE char(10);</code></pre><h4 id="addingremoving-constraints">Adding/Removing Constraints</h4><p>Constraints are added/removed rather than changed. This is because you can have several constraints in a column.</p><pre><code class="sql language-sql">ALTER TABLE
  bar
ADD
  CONSTRAINT
  [constraint_name]
  constraint_clause;</code></pre><div class="ui info message"><p><code>constraint_name</code> is optional, as indicated by the brackets.</p></div><p>Depending on the type of constraint, the syntax can vary. This is true for so called “table constraints” and “column constraints”.</p><p>The difference is mainly syntactic.</p><p><code>NOT NULL</code> for example is always a column constraint, which is why it has its special command for adding constraint to an existing table:</p><pre><code class="sql language-sql">ALTER TABLE
  bar
ALTER COLUMN
  barfoo
SET
  NOT NULL;</code></pre><p>To remove a constraint, we use the following syntax:</p><pre><code class="sql language-sql">ALTER TABLE
  bar DROP CONSTRAINT constraint_name;</code></pre><p>To drop the <code>DEFAULT</code> clause on data type <code>serial</code>, we use the following:</p><pre><code class="sql language-sql">ALTER TABLE
  bar
ALTER COLUMN
  id DROP DEFAULT;</code></pre><h3 id="addingremoving-a-column">Adding/Removing a Column</h3><p>The syntax is the <code>ADD COLUMN</code> clause to <code>ALTER TABLE</code> statement:</p><pre><code class="sql language-sql">ALTER TABLE
  bar
ADD
  COLUMN last_login timestamp NOT NULL DEFAULT NOW();</code></pre><p>Removing a column uses <code>DROP COLUMN</code>:</p><pre><code class="sql language-sql">ALTER TABLE
  bar DROP COLUMN piyo;</code></pre><h3 id="dropping-tables">Dropping Tables</h3><p>This dangerous action can be done with the following command:</p><pre><code class="sql language-sql">DROP TABLE bar;</code></pre><div class="ui warning message"><p>This action is irreversible.</p></div><p><a href="https://launchschool.com/books/sql/read/alter_table">Source</a></p><div id="footnotes"><ol><li id="fn1"><p><a href="https://wiki.postgresql.org/wiki/Don%27t_Do_This#Don.27t_use_serial">PostgreSQL Don’t Do This</a></p><a href="#fnref1">↩︎</a></li></ol></div></div><div class="metadata"><div class="date" title="Zettel date"><time datetime="2022-03-25T12:57">2022-03-25</time></div></div></article><nav class="ui attached segment deemphasized backlinksPane" id="neuron-backlinks-pane"><h3 class="ui header"><span title="Backlinks from folgezettel parents">Uplinks</span></h3><ul class="backlinks"><li><span class="zettel-link-container folge"><span class="zettel-link" title="2020-08-02"><a href="b6a0ce9f">Software</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><span class="zettel-link-container folge"><span class="zettel-link" title="2022-03-25T12:57"><a href="sql">Structured Query Language (SQL)</a><span data-nosnippet="" style="user-select: none; color: gray" title="Folgezettel">#</span></span></span></div></li></ul></li></ul></nav><nav class="ui bottom attached icon compact inverted menu violet" id="neuron-nav-bar"><!--replace-start-9--><a class="item" href="." title="Home"><i class="home icon"></i></a><!--replace-end-9--><a class="item" href="https://github.com/cyberflamingo/exobrain/edit/master/./sql.md" title="Edit this page"><i class="edit icon"></i></a><a class="right item" href="impulse" title="Open Impulse"><i class="wave square icon"></i></a></nav></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.35.3" /></a></div></div></div></body></html>